% Header for UC Berkeley Examination TeX Files

% Imports
\usepackage{graphicx}
\usepackage{amsfonts, amsmath, amsthm, amssymb, wasysym}
\usepackage{enumerate}
\usepackage{wrapfig}
\usepackage{color}
\usepackage{pifont}
\usepackage{multicol, multirow}
\usepackage{textcomp}
\usepackage{listings}
\usepackage{scalerel}
\usepackage{tabularx}
\usepackage[inline]{enumitem}
\usepackage{array}
\usepackage[hidelinks]{hyperref}
\usepackage{tikz}
\usepackage{adjustbox}
%\usepackage[varqu]{inconsolata}
\usepackage[T1]{fontenc}

% Course information
\def\coursenumber{CS 61A}
\def\class{Structure and Interpretation of Computer Programs}

% Macros for use in assignments and exams
\def\q#1#2{{\bf\item (#1 points)\quad #2}}
\def\subq#1{{\bf\item (#1 pt)}}
\def\mp{{\it Multiple choice}: }
\newcommand{\eat}[1]{\ignorespaces}
\newcommand{\todo}[1]{ {\color{blue} TODO: #1} }
\def\truefalse{Circle \emph{True} or \emph{False}: }

% Define formatting
\def\asis{\obeylines\obeyspaces}
\def\ttp{.\skip -0.5em\ }
\def\tab{\hbox{\kern10pt}}
{\obeyspaces\global\def {\ }}
\newcolumntype{x}[1]{>{\centering\arraybackslash\hspace{0pt}}p{#1}}

% Defining terms
\newcommand{\define}[1]{\textbf{#1}}

\textheight=9in
\textwidth=7in
\topmargin=-0.5in
\oddsidemargin=-0.25in
\evensidemargin=-0.25in
\parindent=0pt
\parskip=5pt
\itemsep=-1pt
\newlength{\bigitemsep}
\bigitemsep=10pt plus 4pt minus 6pt
\floatsep=5pt plus 2pt minus 3pt
\intextsep=5pt plus 2pt minus 3pt
\textfloatsep=5pt plus 2pt minus 3pt
\renewcommand{\baselinestretch}{1.0}
\font\dunhd=cmdunh10 scaled \magstep5
\font\dunhc=cmdunh10 scaled \magstep4
\font\dunhb=cmdunh10 scaled \magstep3
\font\dunha=cmdunh10 scaled \magstep2
\date{}

\lstset{%
  basicstyle=\ttfamily,
  showstringspaces=false,
  keepspaces=true,
  columns=fullflexible,
  upquote=true,
}

% Multiple choice questions
% Gradescope template for multiple choice questions
\newcommand{\mcqb}{{\Large$\Circle$}}
\newcommand{\mcqs}{\textcolor{red}{\Large$\CIRCLE$}}
% Gradescope template for multiple option questions
\newcommand{\moqb}{{\Large$\Square$}}
\newcommand{\moqs}{\textcolor{red}{\Large$\blacksquare$}}
% Define new semantic choice type
\newlist{choices}{itemize}{1}
\setlist[choices]{label*=\mcqb, leftmargin=*}
\newlist{choices*}{itemize*}{1}
\setlist[choices*]{label*=\mcqb, leftmargin=*, itemjoin=\hspace{8pt}}
\newcommand{\choice}{\item}
\newcommand{\choicepage}[2][\mcqb]{\choice[#1] \begin{minipage}[t]{\linewidth}
                  #2
                  \end{minipage}}
% Define new semantic option type
\newlist{options}{itemize}{1}
\setlist[options]{label*=\moqb, leftmargin=*}
\newlist{options*}{itemize*}{1}
\setlist[options*]{label*=\moqb, leftmargin=*, itemjoin=\hspace{8pt}}
\newcommand{\option}{\item}
\newcommand{\optionpage}[2][\moqb]{\option[#1] \begin{minipage}[t]{\linewidth}
                  #2
                  \end{minipage}}
% Provide column-restricted environments
\setlength\multicolsep{5pt}
\SetEnumitemKey{twocol}{
  before=\raggedcolumns\begin{multicols}{2},
  after=\end{multicols}\vspace*{-\baselineskip}}
\SetEnumitemKey{threecol}{
  before=\raggedcolumns\begin{multicols}{3},
  after=\end{multicols}\vspace*{-\baselineskip}}
\SetEnumitemKey{fourcol}{
  before=\raggedcolumns\begin{multicols}{4},
  after=\end{multicols}\vspace*{-\baselineskip}}
\SetEnumitemKey{fivecol}{
  before=\raggedcolumns\begin{multicols}{5},
  after=\end{multicols}\vspace*{-\baselineskip}}

% Formatting and title
\def\preamble#1{\gdef\@preamble{#1}}
\def\sp#1{\underline{\hspace*{#1}}}

\def\maketitle{%
 \begingroup
 \def\thefootnote{\fnsymbol{footnote}}
 \def\@makefnmark{\hbox
 to 0pt{$^{\@thefnmark}$\hss}}
 \if@twocolumn
 \twocolumn[\@maketitle]
 \else \newpage
 \global\@topnum\z@ \@maketitle \fi
\@thanks
 \endgroup
 \setcounter{footnote}{0}
 \let\maketitle\relax
 \let\@maketitle\relax
 \gdef\@thanks{}\gdef\@author{}\gdef\@title{}\let\thanks\relax}
\def\@maketitle{\newpage
\hrule height6pt \vskip .7em
\makebox[1.6in][l]{\dunhb \coursenumber}
{\dunhb \class \hfill \ }
\vskip-0.15in
\makebox[1.6in][l]{\dunhb \semester}
{\sc \hfill \@title \par}
\vskip 0.6em
\hrule height6pt
 \par
 \vskip .5em}
\def\section{\@startsection {section}{1}{\z@}{-3.0ex plus -.6ex minus
    -.2ex}{1.3ex plus .1ex}{\dunhd}}
\def\subsection{\@startsection{subsection}{2}{\z@}{-1.6ex plus -.5ex minus
   -.1ex}{0.9ex plus .1ex}{\dunha}}

\long\def\@makecaption#1#2{
 \vskip 10pt
 \setbox\@tempboxa\hbox{{\bf #2}}
 \ifdim \wd\@tempboxa >\hsize {\bf #2}\par \else \hbox
to\hsize{\hfil\box\@tempboxa\hfil}
 \fi}
