\begin{blocksection}
    \question The following is abstract data for representing Pokemon.
    Each Pokemon keeps track of its name, age, type, ability to attack, and friends. Given
    our provided constructor, fill out the selectors:
    
    \begin{lstlisting}
    def pokemon(name, generation, type, can_attack, friends):
        """
        Takes in a string name, an int generation, a string type, a boolean can_attack, and a list friends.
        Constructs an Pokemon with these attributes.
        >>> cyndaquil = pokemon("Cyndaquil", 2, "Fire", True, ["Chikorita", "Totodile"])
        >>> pokemon_name(cyndaquil)
        "Cyndaquil"
        >>> pokemon_age(cyndaquil)
        10
        >>> pokemon_type(cyndaquil)
        "Fire"
        >>> pokemon_can_attack(cyndaquil)
        True
        >>> pokemon_friends(cyndaquil)
        ["Chikorita", "Totodile"]
        """
        return [name, age, type, can_attack, friends]
    
    \end{lstlisting}
    
    \end{blocksection}
    \begin{blocksection}
    
    \begin{lstlisting}
    def pokemon_name(p):
    \end{lstlisting}
    \begin{solution}[1in]
    \begin{lstlisting}
        return p[0]
    \end{lstlisting}
    \end{solution}
    \end{blocksection}
    \begin{blocksection}
    
    \begin{lstlisting}
    def pokemon_age(p):
    \end{lstlisting}
    \begin{solution}[1in]
    \begin{lstlisting}
        return p[1]
    \end{lstlisting}
    \end{solution}
    \end{blocksection}
    \begin{blocksection}
    
    \begin{lstlisting}
    def pokemon_friends(p):
    \end{lstlisting}
    \begin{solution}[1in]
    \begin{lstlisting}
        return p[4]
    \end{lstlisting}
    \end{solution}
    \end{blocksection}
    
    %%% Question %%%
    
    \begin{blocksection}
    \question This function returns the correct result, but there's something wrong
    about its implementation. Why is the error an error in the first place, and how can we fix it?
    
    \begin{lstlisting}
    def pokemon_team(pokemen):
        """
        Takes in a list of Pokemon (aptly named Pokemen due to the plural of Pokemon being Pokemon) and returns a list of their names.
        """
        return [pokemon[0] for pokemon in pokemen]
    \end{lstlisting}
    \begin{solution}[1in]
    \lstinline{pokemon[0]} is a Data Abstraction Violation (DAV).
    We should use a selector instead.
    The corrected function looks like:
    \begin{lstlisting}
    def pokemon_roster(pokemen):
        return [pokemon_name(pokemon) for pokemon in pokemen]
    \end{lstlisting}
    \end{solution}
    
    \end{blocksection}
    
    %%% Question %%%
    
    \begin{blocksection}
    \question Fill out the following constructor for the given selectors.
    
    \begin{lstlisting}
    def pokemon(name, generation, type, can_attack, friends):
    \end{lstlisting}
    \begin{solution}[1in]
    \begin{lstlisting}
        return [[name, generation, type], [can_attack], friends]
    \end{lstlisting}
    \end{solution}
    
    \begin{lstlisting}
    def pokemon_generation(p):
        return e[0][1]
    \end{lstlisting}
    
    \begin{lstlisting}
    def pokemon_can_attack(p):
        return e[1][0]
    \end{lstlisting}
    
    \begin{lstlisting}
    def pokemon_friends(p):
        return e[2]
    \end{lstlisting}
    
    \end{blocksection}
    
    %%% Question %%%
    
    \begin{blocksection}
    \question How can we write the fixed \lstinline{pokemon_roster} function for
    the constructors and selectors in the previous question?
    
    \begin{solution}[1.5in]
    No change is necessary to fix \lstinline{pokemon\char`_roster} since using the
    \texttt{pokemon} selectors ``protects'' the roster from constructor definition
    changes.
    \end{solution}
    
    \begin{guide}
    \textbf{Teaching Tips}
    \begin{itemize}
        \item \texttt{pokemon\_roster}
        \begin{itemize}
            \item If data abstraction is new to your students or they donâ€™t feel very confident in the topic, \textbf{consider walking them through this problem}.
            \item The information from 1) is very important for these questions. Make sure your \textbf{students understand the main ideas of 1)!}
            \item 2) may seem easy/trivial, but emphasize how the selector interface allows you to easily use the ADT without violating abstraction barriers.
        \end{itemize}
        \item select \textbf{(Optional)}
        \begin{itemize}
            \item If your students want a challenge problem, they can do this.
            \item Expect most students to struggle with this question. It combines \textbf{HOFs with principles of data abstraction}. Make sure students know how to compare strings.
        \end{itemize}
    \end{itemize}
    \end{guide}
    
    \end{blocksection}
    
    \begin{blocksection}
    \question \textbf{(Optional)} Fill out the following constructor for the given
    selectors.
    
    \begin{lstlisting}
    def pokemon(name, generation, type, can_attack, friends):
        """
        >>> lil_guy = pokemon("Pikachu", 1, "Electric", False, ["Mewtwo", "Lucario"])
        >>> pokemon_name(lil_guy)
        "Pikachu"
        >>> pokemon_generation(lil_guy)
        1
        >>> pokemon_type(lil_guy)
        "Electric"
        >>> pokemon_can_attack(lil_guy)
        False
        >>> pokemon_friends(lil_guy)
        ["Mewtwo", "Lucario"]
        >> lil_guy("type")
        "Breaking abstraction barrier!"
        """
        def select(command):
    \end{lstlisting}
    \begin{solution}[1.8in]
    \begin{lstlisting}
            if command == "name":
                return name
            elif command == "generation":
                return generation
            elif command == "type":
                return type
            elif command == "can_attack":
                return can_attack
            elif command == "friends":
                return friends
            return "Breaking abstraction barrier!"
    \end{lstlisting}
    \end{solution}
    
    \begin{lstlisting}
        return select
    \end{lstlisting}
    
    \begin{lstlisting}
    def pokemon_name(p):
        return p("name")
    \end{lstlisting}
    
    \begin{lstlisting}
    def pokemon_generation(p):
        return p("generation")
    \end{lstlisting}
    
    \begin{lstlisting}
    def pokemon_type(p):
        return p("type")
    \end{lstlisting}

    \begin{lstlisting}
    def pokemon_can_attack(p):
        return p("can_attack")
    \end{lstlisting}

    \begin{lstlisting}
    def pokemon_friends(p):
        return p("friends")
    \end{lstlisting}
    
    \end{blocksection}
    